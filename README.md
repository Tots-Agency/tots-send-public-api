# Tots Send API

The PHP library for interacting with the Tots Send API.

## Installation

Install the package via Composer:

```bash
composer require tots/tots-send-api
```

## Usage

### Basic Setup

Initialize the client with your API key:

```php
use TotsSend\TotsSend;

$client = new TotsSend('YOUR_API_KEY');
```

### Sending an Email (Using a Template)

To send an email using a pre-defined template:

```php
$response = $client->send(
    'recipient@example.com', 
    'welcome-email-slug', 
    [
        'name' => 'John Doe',
        'activation_link' => 'https://example.com/activate'
    ]
);
```

### Sending a Raw Email

To send an email by providing the HTML content directly:

```php
$response = $client->sendRaw(
    'recipient@example.com', 
    'Welcome!', 
    '<h1>Hello John!</h1><p>Welcome to our platform.</p>', 
    ['name' => 'John'], // variables
    'Hello John! Welcome to our platform.' // plain text version
);
```

### Sending Attachments

You can attach files to your emails using the `send` or `sendRaw` methods. The library supports multiple formats for defining files.

#### 1. Using File Paths

```php
$files = [
    [
        'name' => 'invoice.pdf',
        'path' => '/path/to/local/invoice.pdf'
    ]
];

$client->send('recipient@example.com', 'invoice-template', ['id' => 123], $files);
```

#### 2. Using Raw Content (e.g., Generated PDF)

Useful when you have the file content in a variable (e.g., generated by Browsershot or DomPDF) and don't want to save it to disk first.

```php
$pdfContent = $pdfGenerator->output(); // Raw binary string

$files = [
    [
        'name' => 'ticket.pdf',
        'content' => $pdfContent
    ]
];

$client->send('recipient@example.com', 'ticket-template', [], $files);
```

#### 3. Using SplFileInfo or UploadedFile

You can pass `SplFileInfo` objects directly. This is compatible with Laravel's `UploadedFile`.

```php
$file = new \SplFileInfo('/path/to/image.png');

$client->send('recipient@example.com', 'image-template', [], [$file]);
```